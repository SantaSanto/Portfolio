(this.webpackJsonpmui=this.webpackJsonpmui||[]).push([[0],{136:function(e,t,n){e.exports=n(152)},152:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(11),o=n.n(c),u=n(210),i=n(211),l=n(121),s=n(14),p=n(86),m=n(16),f=n(17),d=n(23),v=n(22),h=n(193),b=n(194),y=n(195),E=n(38),x=n(119),O=n.n(x),g=n(120),w=n.n(g),j=n(196),k=n(123),P=n(122),C=n(192),I=n(115),T=n.n(I),S={vertical:"top",horizontal:"right"},A=function(e){var t=e.menuProps,n=r.a.useState(!1),a=Object(k.a)(n,2),c=a[0],o=a[1];return null==t?null:r.a.createElement(r.a.Fragment,null,r.a.createElement(T.a,{onClick:function(){return o(!0)}}),r.a.createElement(P.a,{anchorOrigin:S,transformOrigin:S,keepMounted:!0,open:c,onClose:function(){return o(!1)}},r.a.createElement(r.a.Fragment,null,t.map((function(e){var t=e.url,n=e.label;return r.a.createElement(C.a,{component:"a",href:t},n)})))))},B=Object(h.a)((function(e){return{title:{paddingLeft:"16px",paddingRight:"16px",flexGrow:1}}})),D=function(e){var t=e.title,n=e.iconProps,a=e.menuProps;return r.a.createElement(b.a,{position:"static"},r.a.createElement(y.a,null,r.a.createElement(_,{iconProps:n}),r.a.createElement(L,{title:t}),r.a.createElement(A,{menuProps:a})))},_=function(e){var t=e.iconProps,n=t.type,a=t.url;return r.a.createElement(j.a,{href:a,color:"inherit"},q(n))},L=function(e){var t=e.title,n=B();return r.a.createElement(E.a,{variant:"h6",className:n.title},t)},q=function(e){switch(e){case"Home":return r.a.createElement(O.a,null);case"Back":return r.a.createElement(w.a,null);default:return null}},F=function(e){var t=e.title,n=e.iconProps,a=e.menuProps,c=e.children;return r.a.createElement(r.a.Fragment,null,r.a.createElement(D,{title:t,iconProps:n,menuProps:a}),c)},N=n(197),M=n(198),V=n(199),$={CardHeader:{paddingBottom:"0px"},content:{paddingTop:"0px"}},W={variant:"h6"},H=function(e){var t=e.title,n=e.index,a=e.selectedTab,c=e.children;return n!=a?null:r.a.createElement(N.a,null,r.a.createElement(M.a,{style:$.CardHeader,title:t,titleTypographyProps:W}),r.a.createElement(V.a,{style:$.content},c))},K=n(191),U=n(156),R=n(203),z=n(202),J=n(213),G=n(200),X=n(201),Q=Object(h.a)((function(e){return{orange:{color:e.palette.getContrastText(G.a[500]),backgroundColor:G.a[500]},purple:{color:e.palette.getContrastText(X.a[500]),backgroundColor:X.a[500]}}})),Y=function(e){var t=e.letter,n=Q()[function(){switch(Math.floor(5*Math.random())+1){case 1:case 2:return"orange";case 3:case 4:return"purple";case 5:return"orange";default:return""}}()];return r.a.createElement(z.a,null,r.a.createElement(J.a,{className:n},t))};var Z=function(e){var t=e.folio,n=t._id,a=t.name,c=t.desc,o=a.charAt(0).toUpperCase();return r.a.createElement(U.a,{key:n,button:!0,component:"a",href:"/folio/view/".concat(n)},r.a.createElement(Y,{letter:o}),r.a.createElement(R.a,{primary:a,secondary:c}))},ee=function(e){var t=e.folios;return null==t?null:r.a.createElement(K.a,null,t.map((function(e){return r.a.createElement(Z,{folio:e})})))},te=n(53),ne=n(5),ae=n.n(ne),re=n(7),ce=n(37),oe=n(52),ue=new ce.a("PORTFOLIO");ce.a.plugin(oe.a);ue.createIndex({index:{ddoc:"portfolio-name",fields:["name"]}}).then((function(e){console.log(e)})).catch((function(e){console.log(e)}));var ie=function(){var e=Object(re.a)(ae.a.mark((function e(t){var n;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ue.put(t);case 3:return n=e.sent,e.abrupt("return",n.ok);case 7:return e.prev=7,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),le=function(){var e=Object(re.a)(ae.a.mark((function e(){var t,n;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={selector:{name:{$gte:null}},fields:["_id","name","desc"],sort:["name"]},e.prev=1,e.next=4,ue.find(t);case 4:return n=e.sent,e.abrupt("return",n);case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),se=function(){var e=Object(re.a)(ae.a.mark((function e(t){var n,a;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={selector:{_id:{$eq:t}},fields:["_id","name"]},e.prev=1,e.next=4,ue.find(n);case 4:return a=e.sent,e.abrupt("return",a);case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),pe=function(){var e=Object(re.a)(ae.a.mark((function e(t){var n;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},e.abrupt("return",n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),me=function(){var e=Object(re.a)(ae.a.mark((function e(t){var n,a;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Date.now().toString(),a=Object(te.a)({_id:n},t),e.next=4,ie(a);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fe=function(){var e=Object(re.a)(ae.a.mark((function e(){var t;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le();case 2:return t=e.sent,e.abrupt("return",null===t||void 0===t?void 0:t.docs);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),de=function(){var e=Object(re.a)(ae.a.mark((function e(t){var n,a;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se(t);case 2:return a=e.sent,e.abrupt("return",null===a||void 0===a||null===(n=a.docs)||void 0===n?void 0:n[0]);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ve=function(e){Object(d.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).state={folios:[]},a.iconProps={type:"Home"},a.menuProps=[{label:"Create Portfolio",url:"/folio/new"}],a}return Object(f.a)(n,[{key:"componentDidMount",value:function(){var e=this;fe().then((function(t){e.setState({folios:t})}))}},{key:"render",value:function(){var e=this.iconProps,t=this.menuProps,n=this.state.folios;return r.a.createElement(F,{title:"Asset Manager",iconProps:e,menuProps:t},r.a.createElement(H,{title:"Portfolio"},r.a.createElement(ee,{folios:n})))}}]),n}(r.a.Component),he=n(205),be=n(206),ye=n(36),Ee=n(78),xe=function(e){return r.a.createElement(ye.a,Object.assign({fullWidth:!0,component:Ee.TextField},e))},Oe={fullWidth:!0},ge=function(e){var t=e.name,n=e.label,a=e.options,c=e.optionKey,o=e.optionLabel;return r.a.createElement(ye.a,{name:t,label:n,fullWidth:!0,component:Ee.Select,formControlProps:Oe},a.map((function(e){return r.a.createElement(C.a,{value:e[c]},e[o])})))},we=function(e){Object(d.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).onSubmit=function(){var e=Object(re.a)(ae.a.mark((function e(t){return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:me(t)&&a.props.history.push("/");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.state={folio:{allocation:{equity:25,debt:25,bullion:25,cash:25}}},a.iconProps={type:"Back",url:"/"},a}return Object(f.a)(n,[{key:"render",value:function(){var e=this.iconProps;return r.a.createElement(F,{title:"Portfolio Form",iconProps:e},r.a.createElement(H,{title:"Create Portfolio"},r.a.createElement("br",null),r.a.createElement(ye.b,{onSubmit:this.onSubmit,validateOnBlur:!0,validate:pe,initialValues:this.state.folio,render:function(e){return r.a.createElement("form",{onSubmit:e.handleSubmit,noValidate:!0},r.a.createElement(je,e))}})))}}]),n}(r.a.Component),je=function(){return r.a.createElement(he.a,{container:!0,direction:"row",justify:"space-evenly",spacing:"5"},r.a.createElement(he.a,{item:!0,xs:"12",lg:"12"},r.a.createElement(xe,{name:"name",label:"Name",required:!0})),r.a.createElement(he.a,{item:!0,xs:"12",lg:"12"},r.a.createElement(xe,{name:"desc",label:"Description"})),r.a.createElement(he.a,{item:!0,xs:"6",lg:"3"},r.a.createElement(xe,{name:"allocation.equity",label:"Equity",type:"number"})),r.a.createElement(he.a,{item:!0,xs:"6",lg:"3"},r.a.createElement(xe,{name:"allocation.debt",label:"Debt",type:"number"})),r.a.createElement(he.a,{item:!0,xs:"6",lg:"3"},r.a.createElement(xe,{name:"allocation.bullion",label:"Bullion",type:"number"})),r.a.createElement(he.a,{item:!0,xs:"6",lg:"3"},r.a.createElement(xe,{name:"allocation.cash",label:"Cash",type:"number"})),r.a.createElement(he.a,{item:!0,xs:"12",lg:"12"},r.a.createElement(be.a,{variant:"contained",color:"primary",type:"submit"},"Create")))},ke=n(212),Pe=n(208),Ce=n(126),Ie=n(207),Te=Object(h.a)((function(e){return{orange:{color:e.palette.getContrastText(G.a[500]),backgroundColor:G.a[500]},purple:{color:e.palette.getContrastText(X.a[500]),backgroundColor:X.a[500]}}})),Se=function(e){var t=e.letter,n=Te()[function(){switch(Math.floor(5*Math.random())+1){case 1:case 2:return"orange";case 3:case 4:return"purple";case 5:return"orange";default:return""}}()];return r.a.createElement(z.a,null,r.a.createElement(J.a,{className:n},t))};var Ae={ListItem:{paddingLeft:"4px"}},Be=function(e){var t=e.asset,n=t._id,a=t.name,c=t.type,o=t.fi,u=t.holder,i=t.nav,l=null===c||void 0===c?void 0:c.charAt(0).toUpperCase(),s="/asset/view/".concat(n);return r.a.createElement(U.a,{key:n,button:!0,component:"a",href:s,style:Ae.ListItem},r.a.createElement(Se,{letter:l}),r.a.createElement(R.a,{primary:a,secondary:"".concat(o," - ").concat(u)}),r.a.createElement(Ie.a,null,i))},De=function(e){var t=e.assets;return null==t?null:r.a.createElement(K.a,null,t.map((function(e){return r.a.createElement(Be,{asset:e})})))},_e=new ce.a("ASSET");ce.a.plugin(oe.a);_e.createIndex({index:{ddoc:"asset-folioId",fields:["folioId"]}}).then((function(e){console.log(e)})).catch((function(e){console.log(e)}));var Le=function(){var e=Object(re.a)(ae.a.mark((function e(t){var n;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_e.put(t);case 3:return n=e.sent,e.abrupt("return",n.ok);case 7:return e.prev=7,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),qe=function(){var e=Object(re.a)(ae.a.mark((function e(t){var n;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_e.find(t);case 3:return n=e.sent,e.abrupt("return",n);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),Fe=function(){var e=Object(re.a)(ae.a.mark((function e(t){var n;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={use_index:"asset-folioId",selector:{folioId:{$eq:t}},fields:["_id","name","type","fi","holder","nav"]},e.abrupt("return",qe(n));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ne=function(){var e=Object(re.a)(ae.a.mark((function e(t){var n;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={selector:{_id:{$eq:t}}},e.abrupt("return",qe(n));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Me=[{key:"Equity",value:"Equity"},{key:"Debt",value:"Debt"},{key:"Bullion",value:"Bullion"},{key:"Cash",value:"Cash"}],Ve=[{key:"NPS",value:"NPS"},{key:"DBS",value:"DBS"},{key:"SBI",value:"SBI"},{key:"CITI",value:"CITI"},{key:"EPFO",value:"EPFO"}],$e=[{key:"Santosh",value:"Santosh"},{key:"Lavanya",value:"Lavanya"}],We=function(){var e=Object(re.a)(ae.a.mark((function e(t){var n;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},e.abrupt("return",n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),He=function(){var e=Object(re.a)(ae.a.mark((function e(t){var n,a;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Date.now().toString(),a=Object(te.a)({_id:n},t),e.next=4,Le(a);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ke=function(){var e=Object(re.a)(ae.a.mark((function e(t){return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Le(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ue=function(){var e=Object(re.a)(ae.a.mark((function e(t){var n;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fe(t);case 2:return n=e.sent,e.abrupt("return",null===n||void 0===n?void 0:n.docs);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Re=function(){var e=Object(re.a)(ae.a.mark((function e(t){var n,a;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne(t);case 2:return a=e.sent,e.abrupt("return",null===a||void 0===a||null===(n=a.docs)||void 0===n?void 0:n[0]);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ze=function(e){Object(d.a)(n,e);var t=Object(v.a)(n);function n(e){var a;Object(m.a)(this,n),(a=t.call(this,e)).onTabChange=function(e,t){a.setState({selectedTab:t})};var r=a.props.match.params.folioId;return a.state={folio:{_id:r},assets:{},selectedTab:0},a.iconProps={type:"Back",url:"/"},a.menuProps=[{label:"Add Asset",url:"/asset/".concat(r,"/new")}],a}return Object(f.a)(n,[{key:"componentDidMount",value:function(){var e=Object(re.a)(ae.a.mark((function e(){var t,n,a;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.folio,e.next=3,de(t._id);case 3:return n=e.sent,this.setState({folio:n}),e.next=7,Ue(t._id);case 7:a=e.sent,this.setState({assets:a});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.iconProps,t=this.menuProps,n=this.state,a=n.folio,c=n.assets,o=n.selectedTab;return r.a.createElement(F,{title:a.name,iconProps:e,menuProps:t},r.a.createElement(Ce.a,{elevation:"5"},r.a.createElement(ke.a,{value:o,onChange:this.onTabChange,variant:"fullWidth",indicatorColor:"primary",textColor:"primary"},r.a.createElement(Pe.a,{label:"Allocation"}),r.a.createElement(Pe.a,{label:"Assets"}))),r.a.createElement(H,{title:"Allocation",index:"0",selectedTab:o}),r.a.createElement(H,{title:"Assets",index:"1",selectedTab:o},r.a.createElement(De,{assets:c})))}}]),n}(r.a.Component),Je=function(e){Object(d.a)(n,e);var t=Object(v.a)(n);function n(e){var a;Object(m.a)(this,n),(a=t.call(this,e)).onSubmit=function(){var e=Object(re.a)(ae.a.mark((function e(t){return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:He(t)&&a.props.history.push(a.iconProps.url);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var r=a.props.match.params.folioId;return a.state={asset:{folioId:r}},a.iconProps={type:"Back",url:"/folio/view/".concat(r)},a}return Object(f.a)(n,[{key:"render",value:function(){var e=this.iconProps,t=this.state.asset;return r.a.createElement(F,{title:"Asset Form",iconProps:e},r.a.createElement(H,{title:"Add Asset"},r.a.createElement(ye.b,{onSubmit:this.onSubmit,validateOnBlur:!0,validate:We,initialValues:t,render:function(e){return r.a.createElement("form",{onSubmit:e.handleSubmit,noValidate:!0},r.a.createElement(Ge,e))}})))}}]),n}(r.a.Component),Ge=function(e){return r.a.createElement(he.a,{container:!0,direction:"row",justify:"space-evenly",spacing:"5"},r.a.createElement(he.a,{item:!0,xs:"12",lg:"12"},r.a.createElement(xe,{name:"name",label:"Name",required:!0})),r.a.createElement(he.a,{item:!0,xs:"12",lg:"12"},r.a.createElement(ge,{name:"type",label:"Type",options:Me,optionKey:"key",optionLabel:"value"})),r.a.createElement(he.a,{item:!0,xs:"6",lg:"6"},r.a.createElement(ge,{name:"fi",label:"Institution",options:Ve,optionKey:"key",optionLabel:"value"})),r.a.createElement(he.a,{item:!0,xs:"6",lg:"6"},r.a.createElement(ge,{name:"holder",label:"Holder",options:$e,optionKey:"key",optionLabel:"value"})),r.a.createElement(he.a,{item:!0,xs:"12",lg:"12"},r.a.createElement(be.a,{variant:"contained",color:"primary",type:"submit"},"Create")))},Xe=n(209),Qe={ListItem:{paddingLeft:"4px"}},Ye=function(e){var t=e.txn,n=t._id,a=t.date,c=t.type,o=t.amount,u=null===c||void 0===c?void 0:c.charAt(0).toUpperCase();return r.a.createElement(U.a,{key:n,button:!0,component:"a",href:"#",style:Qe.ListItem},r.a.createElement(Se,{letter:u}),r.a.createElement(R.a,{primary:a,secondary:c}),r.a.createElement(Ie.a,null,o))},Ze=function(e){var t=e.txns;return null==t?null:r.a.createElement(K.a,{dense:"true"},t.map((function(e){return r.a.createElement(Ye,{txn:e})})))},et=n(61),tt=n(32),nt=n(57),at=n(80),rt=Object(at.a)("dao"),ct=function(){function e(t){Object(m.a)(this,e),Object.defineProperty(this,rt,{writable:!0,value:null}),Object(nt.a)(this,rt)[rt]=t,console.log("AbstractService::constructor")}return Object(f.a)(e,[{key:"getDao",value:function(){return Object(nt.a)(this,rt)[rt]}},{key:"create",value:function(){var e=Object(re.a)(ae.a.mark((function e(t){var n,a;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Date.now().toString(),a=Object(te.a)({_id:n},t),e.abrupt("return",this.getDao().put(a));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),ot=n(70),ut=Object(at.a)("db"),it={index:{ddoc:"txn_date_assetId",fields:["date","assetId"]}},lt=new(function(e){Object(d.a)(n,e);var t=Object(v.a)(n);function n(e){var a,r;return Object(m.a)(this,n),r=t.call(this,e),console.log("TxnDao::constructor"),Object(et.a)((a=Object(ot.a)(r),Object(tt.a)(n.prototype)),"createIndex",a).call(a,it),r}return Object(f.a)(n,[{key:"findByAssetId",value:function(){var e=Object(re.a)(ae.a.mark((function e(t){var a;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={use_index:"txn_date_assetId",selector:{date:{$gte:null},assetId:{$eq:t}},sort:[{date:"desc"}]},e.abrupt("return",Object(et.a)(Object(tt.a)(n.prototype),"find",this).call(this,a));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(function(){function e(t){Object(m.a)(this,e),Object.defineProperty(this,ut,{writable:!0,value:null}),ce.a.plugin(oe.a),Object(nt.a)(this,ut)[ut]=new ce.a(t)}return Object(f.a)(e,[{key:"getDB",value:function(){return Object(nt.a)(this,ut)[ut]}},{key:"createIndex",value:function(e){this.getDB().createIndex(e).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}))}},{key:"put",value:function(){var e=Object(re.a)(ae.a.mark((function e(t){var n;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getDB().put(t);case 3:return n=e.sent,e.abrupt("return",n.ok);case 7:return e.prev=7,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"find",value:function(){var e=Object(re.a)(ae.a.mark((function e(t){return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",this.getDB().find(t));case 4:e.prev=4,e.t0=e.catch(0),console.log(e.t0);case 7:case"end":return e.stop()}}),e,this,[[0,4]])})));return function(t){return e.apply(this,arguments)}}()},{key:"findById",value:function(){var e=Object(re.a)(ae.a.mark((function e(t){var n;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={selector:{_id:{$eq:t}}},e.abrupt("return",this.find(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}()))("TXN");Object.freeze(lt);var st=lt,pt=new(function(e){Object(d.a)(n,e);var t=Object(v.a)(n);function n(){var e;return Object(m.a)(this,n),e=t.call(this,st),console.log("TxnService::constructor"),e}return Object(f.a)(n,[{key:"validate",value:function(){var e=Object(re.a)(ae.a.mark((function e(t){var n;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},e.abrupt("return",n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"createTxn",value:function(){var e=Object(re.a)(ae.a.mark((function e(t){var a;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(et.a)(Object(tt.a)(n.prototype),"create",this).call(this,t);case 2:return(a=e.sent)&&this.calcAndUpdateAsset(t.assetId),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTxnByAssetId",value:function(){var e=Object(re.a)(ae.a.mark((function e(t){var n;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,st.findByAssetId(t);case 2:return n=e.sent,e.abrupt("return",null===n||void 0===n?void 0:n.docs);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"calcAndUpdateAsset",value:function(){var e=Object(re.a)(ae.a.mark((function e(t){var n,a;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getTxnByAssetId(t);case 2:return n=e.sent,e.next=5,Re(t);case 5:a=e.sent,console.log(a),a.deposit=n.reduce(dt,0),a.credit=n.reduce(vt,0),a.nav=ht(n),console.log(a),Ke(a);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(ct));Object.freeze(pt);var mt=pt,ft=[{key:"Deposit",value:"Deposit"},{key:"Credit",value:"Credit"},{key:"NAV",value:"NAV"}],dt=function(e,t){return"Deposit"==t.type?e+parseFloat(t.amount):e},vt=function(e,t){return"Credit"==t.type?e+parseFloat(t.amount):e},ht=function(e){for(var t=0,n=0;n<e.length;n++){var a=e[n];if(t+=parseFloat(a.amount),"NAV"==a.type)break}return t},bt=function(e){Object(d.a)(n,e);var t=Object(v.a)(n);function n(e){var a;Object(m.a)(this,n),(a=t.call(this,e)).onTabChange=function(e,t){a.setState({selectedTab:t})};var r=a.props.match.params.assetId;return a.state={asset:{_id:r},txns:[],selectedTab:0},a.iconProps={type:"Back",url:"/"},a.menuProps=[{label:"Add Transaction",url:"/txn/".concat(r,"/new")}],a}return Object(f.a)(n,[{key:"componentDidMount",value:function(){var e=Object(re.a)(ae.a.mark((function e(){var t,n,a;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.asset,e.next=3,Re(t._id);case 3:return n=e.sent,this.setState({asset:n}),e.next=7,mt.getTxnByAssetId(t._id);case 7:a=e.sent,this.setState({txns:a});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.iconProps,t=this.menuProps,n=this.state,a=n.asset,c=n.txns,o=n.selectedTab;return r.a.createElement(F,{title:a.name,iconProps:e,menuProps:t},r.a.createElement(Ce.a,{elevation:"5"},r.a.createElement(ke.a,{value:o,onChange:this.onTabChange,variant:"fullWidth",indicatorColor:"primary",textColor:"primary"},r.a.createElement(Pe.a,{label:"Asset Details"}),r.a.createElement(Pe.a,{label:"Transaction"}))),r.a.createElement(H,{title:"Asset Details",index:"0",selectedTab:o},r.a.createElement(K.a,{component:"li",dense:"true"},r.a.createElement(U.a,null,r.a.createElement(R.a,{primary:"Asset Type"}),r.a.createElement(Ie.a,null,a.type)),r.a.createElement(Xe.a,null),r.a.createElement(U.a,null,r.a.createElement(R.a,{primary:"Institution"}),r.a.createElement(Ie.a,null,a.fi)),r.a.createElement(Xe.a,null),r.a.createElement(U.a,null,r.a.createElement(R.a,{primary:"Holder"}),r.a.createElement(Ie.a,null,a.holder)),r.a.createElement(Xe.a,null),r.a.createElement(U.a,null,r.a.createElement(R.a,{primary:"Net Asset Value"}),r.a.createElement(Ie.a,null,a.nav)),r.a.createElement(Xe.a,null),r.a.createElement(U.a,null,r.a.createElement(R.a,{primary:"Deposit"}),r.a.createElement(Ie.a,null,a.deposit)),r.a.createElement(Xe.a,null),r.a.createElement(U.a,null,r.a.createElement(R.a,{primary:"Credit"}),r.a.createElement(Ie.a,null,a.credit)))),r.a.createElement(H,{title:"Transaction",index:"1",selectedTab:o},r.a.createElement(Ze,{txns:c})))}}]),n}(r.a.Component),yt=function(e){Object(d.a)(n,e);var t=Object(v.a)(n);function n(e){var a;Object(m.a)(this,n),(a=t.call(this,e)).onSubmit=function(){var e=Object(re.a)(ae.a.mark((function e(t){return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:mt.createTxn(t)&&a.props.history.push(a.iconProps.url);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var r=a.props.match.params.assetId;return a.state={txn:{assetId:r}},a.iconProps={type:"Back",url:"/asset/view/".concat(r)},a}return Object(f.a)(n,[{key:"render",value:function(){var e=this.iconProps,t=this.state.txn;return r.a.createElement(F,{title:"Transaction Form",iconProps:e},r.a.createElement(H,{title:"Add Transaction"},r.a.createElement("br",null),r.a.createElement(ye.b,{onSubmit:this.onSubmit,validateOnBlur:!0,validate:mt.validate,initialValues:t,render:function(e){return r.a.createElement("form",{onSubmit:e.handleSubmit,noValidate:!0},r.a.createElement(Et,e))}})))}}]),n}(r.a.Component),Et=function(e){return r.a.createElement(he.a,{container:!0,direction:"row",justify:"space-evenly",spacing:"5"},r.a.createElement(he.a,{item:!0,xs:"6",lg:"6"},r.a.createElement(xe,{name:"date",label:"Date",type:"date",required:!0,InputLabelProps:{shrink:!0}})),r.a.createElement(he.a,{item:!0,xs:"6",lg:"6"},r.a.createElement(ge,{name:"type",label:"Type",required:!0,options:ft,optionKey:"key",optionLabel:"value"})),r.a.createElement(he.a,{item:!0,xs:"12",lg:"12"},r.a.createElement(xe,{name:"amount",label:"Amount",type:"number",required:!0})),r.a.createElement(he.a,{item:!0,xs:"12",lg:"12"},r.a.createElement(be.a,{variant:"contained",color:"primary",type:"submit"},"Create")))},xt=function(){return r.a.createElement(p.a,null,r.a.createElement(s.a,{path:"/",exact:!0,component:ve}),r.a.createElement(s.a,{path:"/folio/new",render:function(e){return r.a.createElement(we,e)}}),r.a.createElement(s.a,{path:"/folio/view/:folioId",render:function(e){return r.a.createElement(ze,e)}}),r.a.createElement(s.a,{path:"/asset/:folioId/new",render:function(e){return r.a.createElement(Je,Object.assign({mode:"New"},e))}}),r.a.createElement(s.a,{path:"/asset/view/:assetId/",render:function(e){return r.a.createElement(bt,e)}}),r.a.createElement(s.a,{path:"/txn/:assetId/new",render:function(e){return r.a.createElement(yt,Object.assign({mode:"New"},e))}}))},Ot=Object(l.a)({typography:{fontFamily:"Rubik"},overrides:{MuiCssBaseline:{"@global":{"@font-face":"Rubik"}}}}),gt=function(){return r.a.createElement(u.a,{theme:Ot},r.a.createElement(i.a,null),r.a.createElement(xt,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(gt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[136,1,2]]]);
//# sourceMappingURL=main.8866de96.chunk.js.map